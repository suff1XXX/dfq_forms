<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–í—Å—Ç—É–ø –¥–æ —Å—ñ–º º—ó | –ê–Ω–∫–µ—Ç–∞</title>
  <meta name="color-scheme" content="dark light">
  <style>
    :root{
      --bg-start:#0a0a12;
      --bg-end:#141429;
      --card-bg:rgba(18,18,30,0.7);
      --card-stroke:rgba(255,255,255,0.08);
      --text:#e9e9f3;
      --muted:#a2a4b6;
      --accent:#7c5cff;
      --accent-2:#18e1a7;
      --input-bg:#1b1b2b;
      --input-stroke:#2b2b44;
      --input-focus:#39395b;
      --error:#ff5c7a;
      --success:#3ce07a;
      --radius:16px;
      --shadow:0 10px 30px rgba(0,0,0,.35);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Segoe UI Emoji", "Apple Color Emoji", sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(140,120,255,.15), transparent 60%),
        radial-gradient(1100px 500px at 110% 0%, rgba(24,225,167,.09), transparent 55%),
        linear-gradient(135deg, var(--bg-start), var(--bg-end));
      display:flex;
      align-items:center;
      justify-content:center;
      padding:34px 18px;
    }

    .wrap{
      width:min(920px, 100%);
      background:var(--card-bg);
      border:1px solid var(--card-stroke);
      border-radius:22px;
      box-shadow:var(--shadow);
      backdrop-filter:saturate(115%) blur(12px);
      overflow:hidden;
      animation:fadeIn .5s ease;
    }
    @keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

    .header{
      display:flex; align-items:center; gap:14px;
      padding:20px 24px 10px;
      border-bottom:1px solid var(--card-stroke);
      background:linear-gradient(180deg, rgba(255,255,255,.03), transparent);
    }
    .logo{
      width:42px; height:42px; border-radius:12px;
      display:grid; place-items:center; font-size:22px;
      background:linear-gradient(135deg, var(--accent), #543dff);
      box-shadow:0 8px 20px rgba(124,92,255,.25);
    }
    .title h1{margin:0; font-size:20px; letter-spacing:.4px}
    .title p{margin:4px 0 0; color:var(--muted); font-size:13px}

    /* Counter */
    .stats-counter{
      margin-left:auto;
      text-align:center;
      padding:0 10px;
    }
    .stats-counter #app-count{
      font-size:24px;
      font-weight:700;
      color:var(--accent-2);
      line-height:1;
      display:block;
    }
    .stats-counter #app-count.pulse{ animation:pulse .4s ease-in-out }
    @keyframes pulse{
      0%, 100%{ transform:scale(1) }
      50%{ transform:scale(1.15) }
    }
    .stats-counter span{
      font-size:11px;
      color:var(--muted);
      letter-spacing:.3px;
    }

    .content{padding:20px; display:grid; gap:18px}

    /* Stepper */
    .stepper{
      position:relative; display:flex; align-items:center; gap:0; padding:10px 6px 0;
    }
    .stepper .track{
      position:absolute; left:42px; right:42px; top:26px; height:3px;
      background:rgba(255,255,255,.08); border-radius:3px; overflow:hidden;
    }
    .stepper .track > span{
      display:block; height:100%; width:var(--w, 0%);
      background:linear-gradient(90deg, var(--accent), #5e46ff);
      transition:width .35s ease;
    }
    .step{
      position:relative; z-index:1; flex:1; text-align:center;
    }
    .step .dot{
      width:34px; height:34px; margin:0 auto 8px; border-radius:50%;
      display:grid; place-items:center; font-weight:600; font-size:14px;
      color:#fff; border:1px solid var(--card-stroke);
      background:#1a1930;
      box-shadow:inset 0 0 0 2px rgba(255,255,255,.02);
      transition:.25s ease;
    }
    .step.active .dot, .step.done .dot{
      background:linear-gradient(135deg, var(--accent), #5e46ff);
      box-shadow:0 6px 16px rgba(124,92,255,.35);
    }
    .step label{
      display:block; font-size:12px; color:var(--muted);
      letter-spacing:.3px;
    }

    /* Form */
    form{display:block}
    .pane{display:none; animation:slide .35s ease}
    .pane.active{display:block}
    @keyframes slide{from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:translateY(0)}}

    .section-title{
      margin:10px 0 14px; font-size:13px; color:var(--muted);
      text-transform:uppercase; letter-spacing:.8px;
      display:flex; gap:8px; align-items:center;
    }
    .badge{
      display:inline-flex; align-items:center; gap:6px;
      padding:6px 10px; font-size:12px; border-radius:999px;
      background:rgba(124,92,255,.16); color:#d9d4ff; border:1px solid rgba(124,92,255,.28);
    }

    .grid{display:grid; gap:14px}
    .g-2{grid-template-columns:1fr}
    @media (min-width: 640px){ .g-2{grid-template-columns:1fr 1fr} }

    label{font-size:13px; opacity:.92; margin:2px 0 6px; display:block}
    .field{
      background:var(--input-bg);
      border:1px solid var(--input-stroke);
      border-radius:12px;
      display:flex; align-items:center; gap:10px;
      padding:10px 12px;
      transition:background .2s, border-color .2s, box-shadow .2s, transform .05s;
    }
    .field:focus-within{
      background:var(--input-focus);
      border-color:#58588a;
      box-shadow:0 0 0 4px rgba(124,92,255,.18);
    }
    .field .icon{opacity:.75; font-size:18px}
    input, textarea, select{
      width:100%; background:transparent; border:none; color:var(--text);
      font-size:14px; outline:none;
    }
    textarea{resize:vertical; min-height:88px}
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0 }
    input[type="number"]{ -moz-appearance:textfield }

    .hint{ color:var(--muted); font-size:12px; margin-top:6px }

    /* Stats preview */
    .preview{
      border:1px dashed rgba(255,255,255,.15);
      border-radius:12px; padding:12px; display:flex; gap:12px; align-items:center;
      background:rgba(255,255,255,.02)
    }
    .preview img{
      width:72px; height:72px; object-fit:cover; border-radius:8px; display:none;
      border:1px solid rgba(255,255,255,.12);
    }
    .preview .empty{ color:var(--muted); font-size:13px }

    /* Actions */
    .actions{ display:flex; gap:10px; justify-content:space-between; margin-top:6px }
    .btn{
      appearance:none; border:1px solid transparent; border-radius:12px; padding:12px 16px;
      color:#fff; background:linear-gradient(135deg, var(--accent), #5e46ff);
      box-shadow:0 10px 22px rgba(124,92,255,.35);
      font-weight:600; letter-spacing:.3px; cursor:pointer;
      transition:.2s ease; min-width:140px; text-align:center;
    }
    .btn:hover{ transform:translateY(-1px) }
    .btn:active{ transform:translateY(0) scale(.99) }
    .btn[disabled]{ opacity:.65; cursor:not-allowed; transform:none; box-shadow:none }
    .btn.secondary{
      background:transparent; color:var(--text); border-color:rgba(255,255,255,.16);
      box-shadow:none;
    }
    .btn.secondary:hover{ background:rgba(255,255,255,.04) }

    /* Review box */
    .review{
      border:1px solid rgba(255,255,255,.1); border-radius:12px; padding:12px;
      background:rgba(255,255,255,.03); display:grid; gap:8px; font-size:14px
    }
    .kv{ display:flex; gap:8px; }
    .kv b{ width:160px; color:#d8d8ef; font-weight:600 }

    /* Toast */
    .toast{
      position:fixed; right:18px; top:18px; z-index:10;
      padding:12px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.16);
      background:rgba(20,20,32,.9); color:#fff; box-shadow:var(--shadow);
      display:none; gap:10px; align-items:center
    }
    .toast.show{ display:flex; animation:pop .2s ease }
    @keyframes pop{ from{transform:translateY(-6px); opacity:0} to{transform:translateY(0); opacity:1} }
    .toast.success{ border-color:rgba(60,224,122,.35) }
    .toast.error{ border-color:rgba(255,92,122,.35) }

    /* Footer note */
    .note{
      padding:10px 20px 20px; color:var(--muted); font-size:12px;
      display:flex; gap:8px; align-items:flex-start
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <div class="logo">üëë</div>
      <div class="title">
        <h1>–í—Å—Ç—É–ø –¥–æ —Å—ñ–º º—ó</h1>
        <p>–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –∞–Ω–∫–µ—Ç—É ‚Äî –º–∏ –∑–≤ º—è–∂–µ–º–æ—Å—å —è–∫–Ω–∞–π—à–≤–∏–¥—à–µ</p>
      </div>
      <!-- NEW COUNTER -->
      <div class="stats-counter">
        <span id="app-count">...</span>
        <span>–ü–æ–¥–∞–Ω–æ –∑–∞—è–≤–æ–∫</span>
      </div>
    </div>

    <div class="content">
      <!-- Stepper -->
      <div class="stepper" aria-label="–ö—Ä–æ–∫–∏ –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è">
        <div class="track" aria-hidden="true"><span id="progress"></span></div>

        <div class="step" data-idx="0">
          <div class="dot">1</div>
          <label>–û—Å–æ–±–∏—Å—Ç–∞</label>
        </div>
        <div class="step" data-idx="1">
          <div class="dot">2</div>
          <label>–Ü–≥—Ä–æ–≤–∞</label>
        </div>
        <div class="step" data-idx="2">
          <div class="dot">3</div>
          <label>–ö–æ–Ω—Ç–∞–∫—Ç–∏</label>        </div>
      </div>

      <form id="familyForm" novalidate>
        <!-- STEP 1 -->
        <section class="pane active" data-step="0">
          <div class="section-title">
            <span class="badge">üìå –û—Å–æ–±–∏—Å—Ç–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è</span>
          </div>
          <div class="grid g-2">
            <div>
              <label for="nick">–í–∞—à –Ω—ñ–∫–Ω–µ–π–º</label>
              <div class="field"><span class="icon">üéØ</span>
                <input type="text" id="nick" name="nick" placeholder="Nick_Name" required />
              </div>
            </div>

            <div>
              <label for="level">–í–∞—à —Ä—ñ–≤–µ–Ω—å</label>
              <div class="field"><span class="icon">üìà</span>
                <input type="number" id="level" name="level" placeholder="–ù–∞–ø—Ä. 12" min="1" required />
              </div>
            </div>

            <div>
              <label for="realname">–Ü–º º—è (IRL)</label>
              <div class="field"><span class="icon">ü™™</span>
                <input type="text" id="realname" name="realname" placeholder="–Ü–º º—è –∞–±–æ –ø—Å–µ–≤–¥–æ–Ω—ñ–º" required />
              </div>
            </div>

            <div>
              <label for="age">–í–∞—à –≤—ñ–∫ (IRL)</label>
              <div class="field"><span class="icon">üéÇ</span>
                <input type="number" id="age" name="age" placeholder="18" min="10" max="99" required />
              </div>
            </div>

            <div class="g-2" style="grid-column:1/-1">
              <label for="timezone">–í–∞—à —á–∞—Å–æ–≤–∏–π –ø–æ—è—Å</label>
              <div class="field"><span class="icon">üïí</span>
                <input type="text" id="timezone" name="timezone" placeholder="UTC+2 / Europe/Kyiv" required />
              </div>
            </div>
          </div>

          <div class="actions">
            <button type="button" class="btn secondary" disabled>–ù–∞–∑–∞–¥</button>
            <button type="button" class="btn" data-next>–î–∞–ª—ñ</button>
          </div>
        </section>

        <!-- STEP 2 -->
        <section class="pane" data-step="1">
          <div class="section-title">
            <span class="badge">üéÆ –Ü–≥—Ä–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è</span>
          </div>
          <div class="grid g-2">
            <div style="grid-column:1/-1">
              <label for="experience">–î–æ—Å–≤—ñ–¥ –Ω–∞ –†–ü –ø—Ä–æ–µ–∫—Ç–∞—Ö —ñ –≤ —Å—ñ–º º—è—Ö</label>
              <div class="field"><span class="icon">üìú</span>
                <textarea id="experience" name="experience" placeholder="–ö–æ—Ä–æ—Ç–∫–æ –æ–ø–∏—à—ñ—Ç—å –≤–∞—à –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –¥–æ—Å–≤—ñ–¥" required></textarea>
              </div>
            </div>

            <div>
              <label for="online">–í–∞—à —Å–µ—Ä–µ–¥–Ω—ñ–π –æ–Ω–ª–∞–π–Ω</label>
              <div class="field"><span class="icon">üìÜ</span>
                <input type="text" id="online" name="online" placeholder="–ù–∞–ø—Ä. 2‚Äì4 –≥–æ–¥/–¥–µ–Ω—å" required />
              </div>
            </div>

            <div>
              <label for="hours">–ì–æ–¥–∏–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ</label>
              <div class="field"><span class="icon">‚åõ</span>
                <input type="number" id="hours" name="hours" placeholder="–ù–∞–ø—Ä. 150" min="0" step="1" required />
              </div>
            </div>

            <div style="grid-column:1/-1">
              <label for="statsImg">–°–∫—Ä—ñ–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (URL)</label>
              <div class="field"><span class="icon">üñºÔ∏è</span>
                <input type="url" id="statsImg" name="statsImg" placeholder="https://..." required />
              </div>
              <div class="preview" id="previewBox">
                <img id="statsPreview" alt="–ü—Ä–µ–≤ º—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏" />
                <div class="empty">–î–æ–¥–∞–π—Ç–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ –ø—Ä–µ–≤ º—é.</div>
              </div>
            </div>
          </div>

          <div class="actions">
            <button type="button" class="btn secondary" data-prev>–ù–∞–∑–∞–¥</button>
            <button type="button" class="btn" data-next>–î–∞–ª—ñ</button>
          </div>
        </section>

        <!-- STEP 3 -->
        <section class="pane" data-step="2">
          <div class="section-title">
            <span class="badge">üìû –ö–æ–Ω—Ç–∞–∫—Ç–∏ —Ç–∞ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è</span>
          </div>
          <div class="grid">
            <div>
              <label for="discord">–í–∞—à Discord</label>
              <div class="field"><span class="icon">üí¨</span>
                <input type="text" id="discord" name="discord" placeholder="@user –∞–±–æ user#1234" required />
              </div>
            </div>

            <div class="review" aria-live="polite">
              <div class="kv"><b>–ù—ñ–∫:</b> <span id="r_nick">‚Äî</span></div>
              <div class="kv"><b>–†—ñ–≤–µ–Ω—å:</b> <span id="r_level">‚Äî</span></div>
              <div class="kv"><b>–Ü–º º—è (IRL):</b> <span id="r_realname">‚Äî</span></div>
              <div class="kv"><b>–í—ñ–∫ (IRL):</b> <span id="r_age">‚Äî</span></div>
              <div class="kv"><b>–ß–∞—Å–æ–≤–∏–π –ø–æ—è—Å:</b> <span id="r_timezone">‚Äî</span></div>
              <div class="kv"><b>–û–Ω–ª–∞–π–Ω:</b> <span id="r_online">‚Äî</span></div>
              <div class="kv"><b>–ì–æ–¥–∏–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ:</b> <span id="r_hours">‚Äî</span></div>
              <div class="kv"><b>Discord:</b> <span id="r_discord">‚Äî</span></div>
            </div>

            <label style="display:flex; gap:10px; align-items:flex-start; font-size:13px; color:var(--muted)">
              <input type="checkbox" id="agree" required style="margin-top:4px; width:16px; height:16px" />
              –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—é, —â–æ –¥–∞–Ω—ñ –≤–∫–∞–∑–∞–Ω—ñ –∫–æ—Ä–µ–∫—Ç–Ω–æ. –†–æ–∑—É–º—ñ—é, —â–æ –º–æ–¥–µ—Ä–∞—Ü—ñ—è –º–æ–∂–µ –∑–≤ º—è–∑–∞—Ç–∏—Å—è –∑—ñ –º–Ω–æ—é –≤ Discord.
            </label>
          </div>

          <div class="actions">
            <button type="button" class="btn secondary" data-prev>–ù–∞–∑–∞–¥</button>
            <button type="submit" class="btn" id="submitBtn">
              –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏
            </button>
          </div>
        </section>
      </form>
    </div>
  </div>

  <div class="toast" id="toast"><span id="toastIcon">‚úÖ</span><span id="toastText">–£—Å–ø—ñ—à–Ω–æ</span></div>

<script>
  // Elements
  const form = document.getElementById("familyForm");
  const panes = Array.from(document.querySelectorAll(".pane"));
  const steps = Array.from(document.querySelectorAll(".stepper .step"));
  const progress = document.getElementById("progress");
  const nextBtns = document.querySelectorAll("[data-next]");
  const prevBtns = document.querySelectorAll("[data-prev]");
  const submitBtn = document.getElementById("submitBtn");
  const toast = document.getElementById("toast");
  const toastIcon = document.getElementById("toastIcon");
  const toastText = document.getElementById("toastText");
  const appCountEl = document.getElementById("app-count"); // COUNTER ELEMENT

  // Inputs
  const nick = document.getElementById("nick");
  const level = document.getElementById("level");
  const realname = document.getElementById("realname");
  const age = document.getElementById("age");
  const timezone = document.getElementById("timezone");
  const experience = document.getElementById("experience");
  const online = document.getElementById("online");
  const hours = document.getElementById("hours");
  const statsImg = document.getElementById("statsImg");
  const discord = document.getElementById("discord");
  const agree = document.getElementById("agree");

  // Review fields
  const r = {
    nick: document.getElementById("r_nick"),
    level: document.getElementById("r_level"),
    realname: document.getElementById("r_realname"),
    age: document.getElementById("r_age"),
    timezone: document.getElementById("r_timezone"),
    online: document.getElementById("r_online"),
    hours: document.getElementById("r_hours"),
    discord: document.getElementById("r_discord"),
  };

  // Stats preview
  const previewImg = document.getElementById("statsPreview");
  const previewBox = document.getElementById("previewBox");

  let current = 0;

  // --- COUNTER LOGIC ---
  const COUNT_KEY = "familyAppSubmissions";
  const BASE_COUNT = 0; // –ü–æ—á–∞—Ç–∫–æ–≤–µ —á–∏—Å–ª–æ –∑–∞—è–≤–æ–∫

  function getSubmissionCount() {
    const storedCount = localStorage.getItem(COUNT_KEY);
    return storedCount ? parseInt(storedCount, 10) : BASE_COUNT;
  }

  function updateCounterDisplay() {
    const count = getSubmissionCount();
    appCountEl.textContent = count;
  }

  function incrementSubmissionCount() {
    let currentCount = getSubmissionCount();
    currentCount++;
    localStorage.setItem(COUNT_KEY, currentCount);
    appCountEl.textContent = currentCount;
    // Animate the number
    appCountEl.classList.add("pulse");
    setTimeout(() => appCountEl.classList.remove("pulse"), 400);
  }
  // --- END COUNTER LOGIC ---


  function setProgress(i){
    const pct = (i)/(steps.length-1) * 100;
    progress.style.setProperty("--w", pct + "%");
    steps.forEach((s, idx)=>{
      s.classList.toggle("active", idx === i);
      s.classList.toggle("done", idx < i);
    });
  }

  function showStep(i){
    current = i;
    panes.forEach((p, idx)=>{
      p.classList.toggle("active", idx === i);
      // Disable hidden pane inputs to avoid native validity blocking
      const controls = p.querySelectorAll("input, textarea, select, button");
      controls.forEach(el => el.disabled = (idx !== i) && el.type !== "button");
    });
    setProgress(i);
    if(i === 2) updateReview();
  }

  function validateCurrentStep(){
    const pane = panes[current];
    const fields = pane.querySelectorAll("input, textarea, select");
    for (const el of fields) {
      if (el.disabled) continue;
      if (!el.checkValidity()) {
        el.reportValidity();
        return false;
      }
    }
    return true;
  }

  nextBtns.forEach(btn => btn.addEventListener("click", ()=>{
    if(!validateCurrentStep()) return;
    showStep(Math.min(current+1, panes.length-1));
  }));
  prevBtns.forEach(btn => btn.addEventListener("click", ()=>{
    showStep(Math.max(current-1, 0));
  }));

  // Live review
  function updateReview(){
    r.nick.textContent = nick.value || "‚Äî";
    r.level.textContent = level.value || "‚Äî";
    r.realname.textContent = realname.value || "‚Äî";
    r.age.textContent = age.value || "‚Äî";
    r.timezone.textContent = timezone.value || "‚Äî";
    r.online.textContent = online.value || "‚Äî";
    r.hours.textContent = hours.value || "‚Äî";
    r.discord.textContent = discord.value || "‚Äî";
  }
  [nick, level, realname, age, timezone, online, hours, discord].forEach(el=>{
    el.addEventListener("input", updateReview);
  });

  // Preview image on URL input
  let previewTimer;
  statsImg.addEventListener("input", ()=>{
    clearTimeout(previewTimer);
    previewTimer = setTimeout(()=>{
      const url = (statsImg.value || "").trim();
      if(!url || !/^https?:\/\//i.test(url)){
        previewImg.style.display="none";
        return;
      }
      previewImg.src = url;
    }, 250);
  });
  previewImg.addEventListener("load", ()=>{
    previewImg.style.display = "block";
  });
  previewImg.addEventListener("error", ()=>{
    previewImg.style.display = "none";
  });

  function toastShow(msg, type="success"){
    toast.className = "toast " + type + " show";
    toastText.textContent = msg;
    toastIcon.textContent = type === "success" ? "‚úÖ" : "‚ö†Ô∏è";
    setTimeout(()=> toast.classList.remove("show"), 3800);
  }

  // IMPORTANT: use your server endpoint that forwards to the Discord webhook securely.
  const WEBHOOK_URL = "https://discord.com/api/webhooks/1439639560496873523/57HPaETWuyPGgH-mSg66ph5WWT9CAkuY-MHZgw73pjoCfaX7vnltcKc4wYjOGzO9EOuy"; // e.g. /api/apply on your backend

  form.addEventListener("submit", async (e)=>{
    e.preventDefault();
    if(!validateCurrentStep()) return;

    if(!WEBHOOK_URL || WEBHOOK_URL.startsWith("YOUR_")){
      toastShow("–ù–µ–º–∞—î —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ endpoint º—É. –î–æ–¥–∞–π—Ç–µ —Å–≤—ñ–π –±–µ–∫–µ–Ω–¥ URL.", "error");
      return;
    }

    const timestamp = new Date().toLocaleString("uk-UA");

    const payload = {
      content: `@here **–ù–æ–≤–∞ –∑–∞—è–≤–∫–∞ –Ω–∞ –≤—Å—Ç—É–ø –¥–æ —Å—ñ–º'—ó**`,
      embeds: [
        {
          title: "üì• –ù–æ–≤–∞ –∑–∞—è–≤–∫–∞",
          description: "–ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–¥–∞–≤ —Ñ–æ—Ä–º—É. –ù–∏–∂—á–µ ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π –∑–≤—ñ—Ç.",
          color: 5814783,
          thumbnail: { url: "https://cdn-icons-png.flaticon.com/512/942/942748.png" },
          fields: [
            {
              name: "üìå –û–°–û–ë–ò–°–¢–ê –Ü–ù–§–û–†–ú–ê–¶–Ü–Ø",
              value:
                `**–ù—ñ–∫:** ${nick.value}\n` +
                `**–†—ñ–≤–µ–Ω—å:** ${level.value}\n` +
                `**–Ü–º º—è (IRL):** ${realname.value}\n` +
                `**–í—ñ–∫ (IRL):** ${age.value}\n` +
                `**–ß–∞—Å–æ–≤–∏–π –ø–æ—è—Å:** ${timezone.value}`
            },
            {
              name: "üéÆ –Ü–ì–†–û–í–ê –Ü–ù–§–û–†–ú–ê–¶–Ü–Ø",
              value:
                `**–î–æ—Å–≤—ñ–¥ –†–ü / —Å—ñ–º º—ó:**\n${experience.value}\n\n` +
                `**–°–µ—Ä–µ–¥–Ω—ñ–π –æ–Ω–ª–∞–π–Ω:** ${online.value}\n` +
                `**–ì–æ–¥–∏–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ:** ${hours.value}`
            },
            {
              name: "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞",
              value: statsImg.value ? `[–í—ñ–¥–∫—Ä–∏—Ç–∏ —Å–∫—Ä—ñ–Ω](${statsImg.value})` : "‚Äî"
            },
            {
              name: "üìû –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è",
              value: `**Discord:** ${discord.value}`
            },
            {
              name: "üïí –î–∞—Ç–∞ –ø–æ–¥–∞–Ω–Ω—è",
              value: timestamp
            }
          ],
          footer: { text: "–°—ñ–º–µ–π–Ω–∏–π –≤—ñ–¥–¥—ñ–ª | –û–±—Ä–æ–±–∫–∞ –∑–∞—è–≤–æ–∫" }
        }
      ]
    };

    submitBtn.disabled = true;
    const originalText = submitBtn.textContent;
    submitBtn.textContent = "–í—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ‚Ä¶";

    try{
      const res = await fetch(WEBHOOK_URL, {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify(payload)
      });

      if(!res.ok) throw new Error("HTTP " + res.status);

      toastShow("–£—Å–ø—ñ—à–Ω–æ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ! üéâ", "success");
      incrementSubmissionCount(); // Increment counter on success
      form.reset();
      previewImg.style.display="none";
      showStep(0);
    }catch(err){
      console.error(err);
      toastShow("–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏. –°–ø—Ä–æ–±—É–π—Ç–µ –ø—ñ–∑–Ω—ñ—à–µ.", "error");
    }finally{
      submitBtn.disabled = false;
      submitBtn.textContent = originalText;
    }
  });

  // Init state
  showStep(0);
  updateCounterDisplay(); // Set initial counter value on page load
</script>
</body>
</html>
